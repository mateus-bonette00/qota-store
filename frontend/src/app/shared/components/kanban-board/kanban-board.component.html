<div class="kanban-board">
  <div class="kanban-columns">
    <div
      *ngFor="let column of columns"
      class="kanban-column"
      [style.border-color]="column.color"
    >
      <div class="column-header" [style.background-color]="column.color">
        <h3>{{ column.title }}</h3>
        <span class="item-count">{{ column.items.length }}</span>
      </div>

      <div
        cdkDropList
        [id]="column.id"
        [cdkDropListData]="column.items"
        [cdkDropListConnectedTo]="getConnectedLists()"
        (cdkDropListDropped)="drop($event, column.id, column.id)"
        class="column-content"
      >
        <div *ngFor="let item of column.items" cdkDrag class="kanban-card" (click)="onCardClick(item)">
          <!-- Usa template externo, se fornecido -->
          <ng-container *ngIf="cardTemplate; else defaultCard"
                        [ngTemplateOutlet]="cardTemplate"
                        [ngTemplateOutletContext]="{ $implicit: item }">
          </ng-container>

          <!-- Template padrÃ£o -->
          <ng-template #defaultCard>
            <div class="default-card">
              {{ item?.nome || item?.title || 'Item' }}
            </div>
          </ng-template>
        </div>

        <div class="drag-placeholder" cdkDropListPlaceholder></div>
      </div>
    </div>
  </div>
</div>
